function recupererTel(){
	
	var monDpt 			= document.getElementById("dpt").value; 	/* Récupérer le numéro de département recherché, ici via saisie user, au final on le déterminera via l'ip de connexion */
	var monService		= document.getElementById("dpt").parentNode.parentNode.parentNode.id; /* On remonte les nodes dans le DOM pour récupérer la chaine texte (représentée par l'id) qui correspond au fichier dans lequel il faut lancer le traitement */
	console.log(monDpt+" "+monService); /*pour test : ici si l'user saisie 81 => retourne "81 sdis"*/
	
	/*Nécessite l'accessibilité de l'url via le poste du client*/
	
	//QUESTION : Le serveur qui héberge va-t'il accepter les requêtes cross domain ???
	/*ajaxGet("http://localhost/webTelMaj/numTel/"+monService+".txt", function (reponse) {*/  		/*Tester sur apache local : OK*/
		
	ajaxGet("numtel/"+monService+".txt", function (reponse) {										/*Pour les tests j'utilise le fichier en local*/
		
		var tab 	= reponse.split("\n");						/*On découpe ce fichier ligne par ligne et on les stock dans un tableau (split par retour charriot)*/
		var maLigne = 555;										/*Code de non correspondance lors des tests d'égalité */
		
		/*Cas ou on peut utiliser une égalité numérique (hors Corse)*/
		if (monDpt!="2A" && monDpt!="2B"){
			monDpt = parseInt(monDpt); 							/*On transforme notre chaine departement en entier*/
			var curseur	= 0;	
			while ((maLigne==555) && (curseur <tab.length) ){	/*Tant que la correspondance n'est pas trouvé et qu'il reste des lignes dans le tableau*/
				var maPosition = parseInt(tab[curseur]);		/*La ligne commence par un entier (dpt) donc le parseint nous renvoie l'entier du dpt à comparer */
				if (maPosition==monDpt){
					maLigne =tab[curseur];						/*Si correspondance on récupére la ligne*/
				}
				else {
					maLigne = 555;								/*Sinon on reste sur le code de non correspondance */
					curseur++;									/*et on passe à la ligne suivante*/
				}			
			}
		}
		else {
			//TODO : Cas de la Corse (piste : égalité charAt sur length de la string)
			var curseur	= 0;
			while ((maLigne==555) && (curseur <tab.length) ){
				var longueurDpt = monDpt.length;
				for (k=0;k<monDpt.length;k++){							/*Boucle sur la longueur de la chaine departement*/
					if(tab[curseur].charAt(k)==monDpt.charAt(k)){		/*Test d'égalité char par char*/
						longueurDpt = longueurDpt-1;					/*A chaque égalité de charactère la longueur diminue de 1*/
					}
					else{
						curseur++;
					}
					if (longueurDpt ==0){								/*Si c'est 0 c'est que tous les tests d'égalité ont été des succés*/
						maLigne = tab[curseur];
					}
				}
			}
		}
		
		/*Une fois qu'on sait quel est le numéro de ligne qui correspond au département*/
		if (maLigne!=555){
			var tab2 = maLigne.split("\t");						/*On découpe ce fichier ligne par ligne et on les stock dans un tableau (split par tabulation)*/
			document.getElementById("numSDIS").value=tab2[2];	/*On renvoie dans la case html numSDIS la valeur retournée par la 3éme colonne (le numero de tel) */
		} else
		{
			document.getElementById("numSDIS").value="non trouvée";
		}
	
	});
}

function ajaxGet(url, callback) {
    var req = new XMLHttpRequest();
    req.open("GET", url);
    req.addEventListener("load", function () {
        if (req.status >= 200 && req.status < 400) {
            // Appelle la fonction callback en lui passant la réponse de la requête
            callback(req.responseText);
        } else {
            console.error(req.status + " " + req.statusText + " " + url);
        }
    });
    req.addEventListener("error", function () {
        console.error("Erreur réseau avec l'URL " + url);
    });
    req.send(null);
}